<% current_controller = controller.controller_name.to_sym %>
<% cache :"menu_#{current_user.language}_#{current_controller}_#{current_user.admin?}" do %>
  <nav id="menu_links">
    <ul>
      <% if current_user.admin %>
        <li class="submenu">
          <%= link_to t(:admin, :scope => :menu), '#',
            :'data-event' => 'toggleMenu', :'data-target' => '#submenu_admin' %>
          <div id="submenu_admin" style="display: none;">
            <ul>
              <%= content_tag(:li, link_to(t(:users, :scope => :menu), users_path),
                :class => (:selected if current_controller == :users)) %>
              <%= content_tag(:li, link_to(t(:customers, :scope => :menu), customers_path),
                :class => (:selected if current_controller == :customers)) %>
              <%= content_tag(:li, link_to(t(:settings, :scope => :menu), settings_path),
                :class => (:selected if current_controller == :settings)) %>
              <%= content_tag(:li, link_to(t(:payments, :scope => :menu), payments_path),
                :class => (:selected if current_controller == :payments)) %>
            </ul>
          </div>
        </li>
      <% end %>
      <%= content_tag(:li, link_to(t(:prints, :scope => :menu), prints_path),
        :class => (:selected if current_controller == :prints)) %>
      <%= content_tag(:li, link_to(t(:documents, :scope => :menu), documents_path),
        :class => (:selected if current_controller == :documents)) %>
      <%= content_tag(:li, link_to(t(:tags, :scope => :menu), tags_path),
        :class => (:selected if current_controller == :tags)) %>
      <li class="submenu">
        <%= link_to t(:more, :scope => :menu), '#',
          :'data-event' => 'toggleMenu', :'data-target' => '#submenu_more' %>
        <div id="submenu_more" style="display: none;">
          <ul>
            <%= content_tag(:li, link_to(t(:articles, :scope => :menu), articles_path),
              :class => (:selected if current_controller == :articles)) %>
            <%= content_tag(:li, link_to(t(:bonuses, :scope => :menu), bonuses_path),
              :class => (:selected if current_controller == :bonuses)) %>
          </ul>
        </div>
      </li>
    </ul>
  </nav>
<% end %>
<nav id="user_actions">
  <div id="username">
    <%= image_tag 'logo.png', :size => '145x41' %> |
    <%= current_user.username %> |
    <%= link_to t(:logout, :scope => [:menu, :actions]),
      user_sessions_path, :method => :delete, :class => 'button white' %>
  </div>
</nav>